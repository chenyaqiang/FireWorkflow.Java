alter table T_FF_RT_PROCINST_VAR drop foreign key FKD79C420D7AF471D8;
alter table T_FF_RT_WORKITEM drop foreign key FK4131554DE2527DDC;
drop table if exists T_FF_DF_WORKFLOWDEF;
drop table if exists T_FF_HIST_TRACE;
drop table if exists T_FF_RT_PROCESSINSTANCE;
drop table if exists T_FF_RT_PROCINST_VAR;
drop table if exists T_FF_RT_TASKINSTANCE;
drop table if exists T_FF_RT_TOKEN;
drop table if exists T_FF_RT_WORKITEM;
create table T_FF_DF_WORKFLOWDEF (ID varchar(50) not null, PROCESS_ID varchar(100) not null comment '流程id', DEFINITION_TYPE varchar(100) not null comment '流程定义文件的类型，默认为fpdl', NAME varchar(100) not null comment '流程的名称', DISPLAY_NAME varchar(128) comment '流程的显示名称', DESCRIPTION text comment '描述', VERSION integer not null comment '流程版本号', STATE bit not null comment '发布状态', UPLOAD_USER varchar(50) comment '上载人', UPLOAD_TIME datetime comment '上载时间', PUBLISH_USER varchar(50) comment '发布人', PUBLISH_TIME datetime comment '发布时间', PROCESS_CONTENT text, primary key (ID));
create table T_FF_HIST_TRACE (ID varchar(50) not null, PROCESSINSTANCE_ID varchar(50) not null, STEP_NUMBER integer not null, MINOR_NUMBER integer not null, TYPE varchar(15) not null, EDGE_ID varchar(100), FROM_NODE_ID varchar(100) not null, TO_NODE_ID varchar(100) not null, primary key (ID));
create table T_FF_RT_PROCESSINSTANCE (ID varchar(50) not null, PROCESS_ID varchar(100) not null comment '流程id', VERSION integer not null comment '流程版本号', NAME varchar(100) comment '流程名称', DISPLAY_NAME varchar(128) comment '流程显示名称', STATE integer not null comment '流程实例状态', SUSPENDED bit not null comment '是否被挂起', CREATOR_ID varchar(50) comment '创建者Id', CREATED_TIME datetime comment '创建时间', STARTED_TIME datetime comment '启动时间', EXPIRED_TIME datetime comment '到期时间', END_TIME datetime comment '终止时间', PARENT_PROCESSINSTANCE_ID varchar(50) comment '父流程实例Id', PARENT_TASKINSTANCE_ID varchar(50) comment '父任务实例id', primary key (ID));
create table T_FF_RT_PROCINST_VAR (PROCESSINSTANCE_ID varchar(50) not null, VALUE varchar(255), NAME varchar(255) not null, primary key (PROCESSINSTANCE_ID, NAME));
create table T_FF_RT_TASKINSTANCE (ID varchar(50) not null, BIZ_TYPE varchar(250) not null, TASK_ID text not null comment '任务id', ACTIVITY_ID varchar(200) not null comment '环节id', NAME varchar(100) not null comment '名称', DISPLAY_NAME varchar(128) comment '名称', STATE integer not null comment '状态', SUSPENDED bit not null comment '是否挂起', TASK_TYPE varchar(10) comment '任务类型,FormTask,ToolTask,SubflowTask', CREATED_TIME datetime not null comment '创建时间', STARTED_TIME datetime comment '启动时间', EXPIRED_TIME datetime comment '到期时间', END_TIME datetime comment '终止时间', ASSIGNMENT_STRATEGY varchar(10) comment 'WorkItem分配策略,取值ALL,ANY', PROCESSINSTANCE_ID varchar(50) not null comment '流程实例id', PROCESS_ID varchar(100) not null comment '流程id', VERSION integer not null comment '流程版本号', TARGET_ACTIVITY_ID varchar(100) comment '后续activity的id', FROM_ACTIVITY_ID text comment '前驱activity的id', STEP_NUMBER integer not null comment '步数', CAN_BE_WITHDRAWN bit not null comment '是否可以被撤销', primary key (ID));
create table T_FF_RT_TOKEN (ID varchar(50) not null, ALIVE bit not null, VALUE integer not null, NODE_ID varchar(200) not null, PROCESSINSTANCE_ID varchar(50) not null, STEP_NUMBER integer not null, FROM_ACTIVITY_ID varchar(100), primary key (ID));
create table T_FF_RT_WORKITEM (ID varchar(50) not null, STATE integer not null comment '状态,0=Initialized ,1=Running, 7=Completed,9=Canceled', CREATED_TIME datetime not null comment '创建时间', CLAIMED_TIME datetime comment '签收时间', END_TIME datetime comment '结束时间', ACTOR_ID varchar(50) comment '操作者Id', COMMENTS text comment '说明', TASKINSTANCE_ID varchar(50) not null, primary key (ID));
create index IDX_TRACE_PROCINSTID on T_FF_HIST_TRACE (PROCESSINSTANCE_ID);
alter table T_FF_RT_PROCINST_VAR add index FKD79C420D7AF471D8 (PROCESSINSTANCE_ID), add constraint FKD79C420D7AF471D8 foreign key (PROCESSINSTANCE_ID) references T_FF_RT_PROCESSINSTANCE (ID);
create index idx_taskInst_stepNb on T_FF_RT_TASKINSTANCE (STEP_NUMBER);
create index idx_wi_creatorid on T_FF_RT_WORKITEM (ACTOR_ID);
alter table T_FF_RT_WORKITEM add index FK4131554DE2527DDC (TASKINSTANCE_ID), add constraint FK4131554DE2527DDC foreign key (TASKINSTANCE_ID) references T_FF_RT_TASKINSTANCE (ID);
